function reconcileEmail(t){function i(){var e=null;if(window.braze!==undefined){e=window.braze}else if(window.appboy!==undefined){e=window.appboy}return e}function o(e){const n=100;window.setTimeout(function(){if(i()!==null&&i().getUser()){e()}else{o(e)}},n)}o(function(){i().getDeviceId(function(e){var n=e;if(n==null){console.warn(`Cannot reconcile email ${t} because Braze device ID cannot be obtained`)}else{const i=new URL([...document.getElementsByTagName("script")].map(e=>e.src).find(e=>e.includes("braze-email-script")));const o=new URLSearchParams(i.search);const c=Object.fromEntries(o.entries());fetch("https://"+c["sdk_url"]+`/api/v3/shopify/email_user_reconcile`+`?email=${encodeURIComponent(t)}`+`&device_id=${n}`+`&api_key=${c["api_key"]}`+`&shop=${c["shop"]}`,{method:"POST"}).then(e=>{console.log(`Successfully reconciled email ${t} with device ID ${n}`)}).catch(e=>{console.error(`Failed to reconcile email ${t} with device ID ${n} due to error [${e}]`)})}})})}